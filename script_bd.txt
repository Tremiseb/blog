-- Table users avec r√¥le
CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  email VARCHAR(255) NOT NULL,
  password VARCHAR(255) NOT NULL,
  username VARCHAR(50) NOT NULL,
  role ENUM('user', 'admin') DEFAULT 'user'
);

CREATE TABLE categorie (
  id INT AUTO_INCREMENT PRIMARY KEY,
  nom VARCHAR(100) NOT NULL
);

CREATE TABLE article (
  id INT AUTO_INCREMENT PRIMARY KEY,
  titre VARCHAR(255) NOT NULL,
  description TEXT,
  user_id INT NOT NULL,
  categorie_id INT,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (categorie_id) REFERENCES categorie(id) ON DELETE SET NULL
);

CREATE TABLE commentaire (
  id INT AUTO_INCREMENT PRIMARY KEY,
  description TEXT NOT NULL,
  article_id INT NOT NULL,
  user_id INT NOT NULL,
  FOREIGN KEY (article_id) REFERENCES article(id) ON DELETE CASCADE,
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);
-- Exemple d'utilisateurs
INSERT INTO users (username, password, role) VALUES 
('admin', MD5('password123'), 'admin'),
('a', MD5('b'), 'admin'),
('client1', MD5('clientpass'), 'client');
